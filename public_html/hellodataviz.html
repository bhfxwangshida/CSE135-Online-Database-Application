<!DOCTYPE html>
<html>
<head>
  <!--Script Reference[1] -->
  <script src="https://cdn.zingchart.com/zingchart.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
  <!-- Chart Placement[2] -->
  <div id="bar_chart"></div>

  <script>
    /////////jquery post & get///////////
    var activity_data = [];
    var performance_data = [];
    var static_data = [];
    var static_count = -1;
    $(document).ready(function(){
      $.get("https://felixwangsd.xyz/api/static", function(data, status){
      static_data = data;
      static_count = static_data.length;
      //alert("Data: " + static_data + "\nStatus: " + status);
      })
      .fail(function(static_data, status) {
      //alert( "error" + "\nData: " + static_data + "\nStatus: " + status);
      });
      $.get("https://felixwangsd.xyz/api/performance", function(data, status){
        performance_data = data;
        //alert("Data: " + performance_data + "\nStatus: " + status);
      })
      .fail(function(performance_data, status) {
      //alert( "error" + "\nData: " + performance_data + "\nStatus: " + status);
      }); 
      $.get("https://felixwangsd.xyz/api/static", function(data, status){
        activity_data = data;
      //alert("Data: " + activity_data + "\nStatus: " + status);
      })
      .fail(function(activity_data, status) {
      //alert( "error" + "\nData: " + activity_data + "\nStatus: " + status);
      });

                
      //var static_count = Object.keys(static_data).length;
      var performance_count = performance_data.length;
      var activity_count = activity_data.length;
      alert(static_count);
      alert(performance_count);
      alert(activity_count); 
      let myConfig = {
        type: 'bar',
        title: {
          text: 'Data Basics',
          fontSize: 24,
        },
        legend: {
          draggable: true,
        },
        scaleX: {
          // Set scale label
          label: { text: 'data type' },
          // Convert text on scale indices
          labels: [ 'static', 'performance', 'activity' ]
        },
        scaleY: {
          // Scale label with unicode character
          label: { text: 'data size' }
        },
        plot: {
          // Animation docs here:
          // https://www.zingchart.com/docs/tutorials/styling/animation#effect
          animation: {
            effect: 'ANIMATION_EXPAND_BOTTOM',
            method: 'ANIMATION_STRONG_EASE_OUT',
            sequence: 'ANIMATION_BY_NODE',
            speed: 275,
          }
        },
        series: [
          {
            // Plot 1 values, linear data
            //values: [static_data,performance_data,activity_data],
            values: [static_count,performance_count,activity_count]
          }
        ]
      };

      // Render Method[3]
      zingchart.render({
        id: 'bar_chart',
        data: myConfig,
      });

    });

/////// line chart /////////////

// CHART CONFIG
// -----------------------------
let chartConfig = {
  type: 'mixed',
  title: {
    text: 'Sample Burndown Chart',
    align: 'left',
    marginLeft: '23%',
  },
  legend: {
    adjustLayout: true,
    verticalAlign: 'middle',
  },
  plot: {
    animation: {
      delay: 500,
      effect: 'ANIMATION_SLIDE_TOP',
      method: 'ANIMATION_BOUNCE_EASE_OUT',
      sequence: 'ANIMATION_NO_SEQUENCE',
      speed: 975,
    },
  },
  scaleX: {
    labels: [
      'Day 1',
      'Day 2',
      'Day 3',
      'Day 4',
      'Day 5',
      'Day 6',
      'Day 7',
      'Day 8',
    ], //one label for every datapoint
  },
  scaleY: {
    label: {
      text: 'Remaing effort (hours)',
      fontSize: 14,
    },
    guide: {
      // dashed lines
      visible: false,
    },
  },
  scaleY2: {
    minValue: 0,
    maxValue: 100,
    step: 25, // can define scale step values or default
    label: {
      text: 'Remaing and completed tasks',
      fontSize: 14,
    },
  },
  crosshairX: {
    lineColor: '#424242',
    lineGapSize: '4px',
    lineStyle: 'dotted',
    plotLabel: {
      backgroundColor: 'white',
      bold: true,
      borderColor: '#e3e3e3',
      borderRadius: '5px',
      fontColor: '#2f2f2f',
      fontFamily: 'Lato',
      fontSize: '12px',
      padding: '15px',
      shadow: true,
      shadowAlpha: 0.2,
      shadowBlur: 5,
      shadowColor: '#a1a1a1',
      shadowDistance: 4,
      textAlign: 'left',
    },
    scaleLabel: {
      backgroundColor: '#424242',
    },
  },
  series: [
    {
      type: 'line',
      text: 'Remaining Tasks',
      values: [35, 42, 67, 89, 25, 34, 67, 85].sort().reverse(),
      lineColor: '#42a5f5',
      marker: {
        visible: 'false',
      },
      scales: 'scale-x, scale-y',
    },
    {
      type: 'line',
      text: 'Remaining Effort',
      values: [25, 32, 57, 79, 15, 24, 57, 75].sort().reverse(),
      lineColor: '#5c6bc0',
      marker: {
        type: 'square',
        backgroundColor: '#5c6bc0',
      },
      scales: 'scale-x, scale-y',
    },
    {
      type: 'line',
      text: 'Completed Tasks',
      values: [90, 80, 70, 60, 50, 40, 30, 20],
      lineColor: '#66bb6a',
      marker: {
        visible: false,
      },
      scales: 'scale-x, scale-y',
    },
    {
      type: 'bar',
      text: 'Completed Tasks',
      values: [5, 10, 6, 3, 6, 2, 0, 9],
      backgroundColor: '#ffa726',
      scales: 'scale-x, scale-y-2',
    },
  ],
};

// RENDER CHART
// -----------------------------
zingchart.render({
  id: 'line chart',
  data: chartConfig,
  height: '560px',
  width: '100%',
});


/////////// pie chart ////////////

    //var static_count = static_data.length;
    //var performance_count = performance_data.length;
    //var activity_count = activity_data.length;


  </script>
</body>
</html>